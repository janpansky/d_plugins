// (C) 2022 GoodData Corporation
import { __awaiter, __generator } from "tslib";
import { areObjRefsEqual } from "@gooddata/sdk-model";
export function validateFilterDisplayForm(ctx, filterAttribute, displayForm) {
    return __awaiter(this, void 0, void 0, function () {
        var backend, workspace, attributeDisplayForms;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    // validate if the filter attribute is available
                    if (!filterAttribute) {
                        return [2 /*return*/, "INVALID_FILTER_ATTRIBUTE"];
                    }
                    backend = ctx.backend, workspace = ctx.workspace;
                    return [4 /*yield*/, backend.workspace(workspace).attributes().getAttribute(filterAttribute)];
                case 1:
                    attributeDisplayForms = (_a.sent()).displayForms;
                    // validate if the display form is between attributes available display forms.
                    if (attributeDisplayForms.some(function (df) { return areObjRefsEqual(df.ref, displayForm); })) {
                        return [2 /*return*/, "VALID"];
                    }
                    return [2 /*return*/, "INVALID_ATTRIBUTE_DISPLAY_FORM"];
            }
        });
    });
}
//# sourceMappingURL=filterDisplayFormValidation.js.map