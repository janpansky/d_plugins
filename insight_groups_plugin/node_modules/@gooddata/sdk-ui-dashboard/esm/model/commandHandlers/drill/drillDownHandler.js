import { __generator } from "tslib";
import { put } from "redux-saga/effects";
import { drillDownRequested, drillDownResolved } from "../../events/drill";
import { getInsightWithAppliedDrillDown } from "@gooddata/sdk-ui-ext";
export function drillDownHandler(ctx, cmd) {
    var _a, drillDefinition, drillEvent, insight, insightWithDrillDownApplied;
    var _b;
    return __generator(this, function (_c) {
        switch (_c.label) {
            case 0:
                _a = cmd.payload, drillDefinition = _a.drillDefinition, drillEvent = _a.drillEvent, insight = _a.insight;
                return [4 /*yield*/, put(drillDownRequested(ctx, insight, drillDefinition, drillEvent, cmd.correlationId))];
            case 1:
                _c.sent();
                insightWithDrillDownApplied = getInsightWithAppliedDrillDown(insight, drillEvent, drillDefinition, (_b = ctx.backend.capabilities.supportsElementUris) !== null && _b !== void 0 ? _b : true);
                return [2 /*return*/, drillDownResolved(ctx, insightWithDrillDownApplied, cmd.payload.drillDefinition, cmd.payload.drillEvent, cmd.correlationId)];
        }
    });
}
//# sourceMappingURL=drillDownHandler.js.map