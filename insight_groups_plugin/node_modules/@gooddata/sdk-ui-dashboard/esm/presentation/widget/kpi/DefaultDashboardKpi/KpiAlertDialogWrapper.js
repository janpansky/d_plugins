import { __assign, __rest } from "tslib";
// (C) 2021-2022 GoodData Corporation
import React, { useMemo } from "react";
import { useIntl } from "react-intl";
import { useDashboardSelector, selectCatalogDateDatasets, } from "../../../../model";
import { enrichBrokenAlertsInfo, KpiAlertDialog } from "./KpiAlerts";
import { useBrokenAlertFiltersMeta } from "./useBrokenAlertFiltersMeta";
export var KpiAlertDialogWrapper = function (props) {
    var brokenAlertFiltersBasicInfo = props.brokenAlertFiltersBasicInfo, backend = props.backend, workspace = props.workspace, restProps = __rest(props, ["brokenAlertFiltersBasicInfo", "backend", "workspace"]);
    var intl = useIntl();
    var dateDatasets = useDashboardSelector(selectCatalogDateDatasets);
    var _a = useBrokenAlertFiltersMeta({
        dateDatasets: dateDatasets,
        backend: backend,
        workspace: workspace,
        brokenAlertFilters: brokenAlertFiltersBasicInfo,
    }), brokenAlertFiltersMeta = _a.result, status = _a.status;
    var brokenAlertFilters = useMemo(function () {
        if (!brokenAlertFiltersMeta) {
            return null;
        }
        return enrichBrokenAlertsInfo(brokenAlertFiltersBasicInfo, intl, restProps.dateFormat, brokenAlertFiltersMeta.dateDatasets, brokenAlertFiltersMeta.attributeFiltersMeta);
    }, [brokenAlertFiltersBasicInfo, brokenAlertFiltersMeta, intl, restProps.dateFormat]);
    return (React.createElement(KpiAlertDialog, __assign({}, restProps, { isAlertDialogOpening: status === "loading", brokenAlertFilters: brokenAlertFilters })));
};
//# sourceMappingURL=KpiAlertDialogWrapper.js.map