// (C) 2022 GoodData Corporation
import { __awaiter, __generator } from "tslib";
import React from "react";
import { FormattedMessage, useIntl } from "react-intl";
import { useBackendStrict, useWorkspaceStrict } from "@gooddata/sdk-ui";
import { ConfirmDialog } from "@gooddata/sdk-ui-kit";
export var DeleteScheduleConfirmDialog = function (props) {
    var scheduledEmail = props.scheduledEmail, onCancel = props.onCancel, onSuccess = props.onSuccess, onError = props.onError;
    var ref = scheduledEmail.ref, subject = scheduledEmail.subject;
    var effectiveBackend = useBackendStrict();
    var effectiveWorkspace = useWorkspaceStrict();
    var intl = useIntl();
    var handleDeleteScheduledMail = function () { return __awaiter(void 0, void 0, void 0, function () {
        var err_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 2, , 3]);
                    return [4 /*yield*/, effectiveBackend.workspace(effectiveWorkspace).dashboards().deleteScheduledMail(ref)];
                case 1:
                    _a.sent();
                    onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess();
                    return [3 /*break*/, 3];
                case 2:
                    err_1 = _a.sent();
                    onError === null || onError === void 0 ? void 0 : onError(err_1);
                    return [3 /*break*/, 3];
                case 3: return [2 /*return*/];
            }
        });
    }); };
    return (React.createElement(ConfirmDialog, { displayCloseButton: true, isPositive: false, headline: intl.formatMessage({ id: "dialogs.schedule.management.delete.dialog" }), cancelButtonText: intl.formatMessage({ id: "cancel" }), submitButtonText: intl.formatMessage({ id: "delete" }), onSubmit: handleDeleteScheduledMail, onClose: onCancel, onCancel: onCancel, className: "gd-scheduled-email-delete-dialog s-scheduled-email-delete-dialog", containerClassName: "gd-scheduled-email-delete-dialog-overlay" },
        React.createElement("span", { className: "s-scheduled-email-delete-dialog-content" },
            React.createElement(FormattedMessage, { id: "dialogs.schedule.management.delete.dialog.confirm", values: {
                    b: function (chunks) { return (React.createElement("span", { className: "gd-scheduled-email-delete-dialog-text" },
                        chunks,
                        " ",
                        React.createElement("strong", null, subject))); },
                } }))));
};
//# sourceMappingURL=DeleteScheduleConfirmDialog.js.map