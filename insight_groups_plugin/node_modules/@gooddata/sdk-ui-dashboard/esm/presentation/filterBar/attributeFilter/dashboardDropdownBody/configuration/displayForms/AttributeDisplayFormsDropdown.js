// (C) 2022 GoodData Corporation
import { areObjRefsEqual } from "@gooddata/sdk-model";
import { Dropdown, DropdownList } from "@gooddata/sdk-ui-kit";
import React from "react";
import { AttributeDisplayFormDropdownButton } from "./AttributeDisplayFormDropdownButton";
import { AttributeDisplayFormDropDownItem } from "./AttributeDisplayFormDropDownItem";
var ITEM_HEIGHT = 23;
var DROPDOWN_WIDTH = 225;
var ALIGN_POINTS = [
    {
        align: "bl tl",
        offset: { x: 0, y: 1 },
    },
    {
        align: "tl bl",
        offset: { x: 0, y: -1 },
    },
];
export var AttributeDisplayFormsDropdown = function (_a) {
    var displayForms = _a.displayForms, selectedDisplayForm = _a.selectedDisplayForm, onChange = _a.onChange;
    var selectedDisplayFormTitle = displayForms.find(function (df) {
        return areObjRefsEqual(df.ref, selectedDisplayForm);
    }).title;
    return (React.createElement(Dropdown, { alignPoints: ALIGN_POINTS, renderButton: function (_a) {
            var isOpen = _a.isOpen, toggleDropdown = _a.toggleDropdown;
            return (React.createElement(AttributeDisplayFormDropdownButton, { title: selectedDisplayFormTitle, isOpened: isOpen, toggleDropdown: toggleDropdown }));
        }, renderBody: function (_a) {
            var closeDropdown = _a.closeDropdown;
            return (React.createElement(DropdownList, { className: "attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body", items: displayForms, itemHeight: ITEM_HEIGHT, width: DROPDOWN_WIDTH, renderItem: function (_a) {
                    var item = _a.item;
                    var selected = areObjRefsEqual(selectedDisplayForm, item.ref);
                    var onClick = function (displayForm) {
                        closeDropdown();
                        if (!selected) {
                            onChange(displayForm);
                        }
                    };
                    return (React.createElement(AttributeDisplayFormDropDownItem, { displayForm: item, selected: selected, onClick: onClick }));
                } }));
        } }));
};
//# sourceMappingURL=AttributeDisplayFormsDropdown.js.map